---
title: 第四讲——并发编程基础知识
id: 4
date: 2019-8-17 20:00:00
tags: socket和并发编程
comment: true
---

### 学习大纲

- 进程的基础
- 操作系统
- 并行和并发
- 操作系统的发展史
- 进程的理论

请看blog:https://blog.csdn.net/qq_40890660/article/details/99867885

<!-----more----->

### 进程的基础

```
什么是进程和程序？
程序：程序只是一个静态的指令集合，或者说是一堆静态的代码文件。
进程：进程是一个正在系统中活动的指令集合，或者说一个任务。负责执行任务的就是 cpu
进程和程序的联系：进程指的是程序的运行过程。

进程被谁运行？
由操作系统操控调用交于cpu运行。

注：同一程序执行两次，那也是两个进程，比如我们打开qq两次，就相当于创建了两个进程。
```

### 操作系统

```
什么是操作系统？
	简单的说，操作系统就是一个协调、管理和控制计算机硬件资源和软件资源的控制程序（本质上也是一款软件）。
	
操作系统的作用？
	第一个作用：将一些对硬件操作的复杂的丑陋的硬件调用接口变成简单的清晰的接口。
	第二个作用：多个进程抢占一个资源（CPU）时，操作系统会将你的执行变得合理有序。

阻塞：input read write sleep recv recvfrom accept send sendto 
```

### 并行和并发

```
无论是并行还是并发，在用户看来都是'同时'运行的，不管是进程还是线程，都只是一个任务而已，真是干活的是cpu，cpu来做这些任务，而一个cpu同一时刻只能执行一个任务

并发：并发是指在同一时刻只能有一条指令执行，但多个进程指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果。单个cpu+多道技术就可以实现并发，（并行也属于并发）

并行：并行指在同一时刻有多条指令在多个处理器上同时执行。

多道技术的回顾：内存中同时存入多道（多个）程序，cpu从一个进程快速切换到另外一个，使每个进程各自运行几十或者几百毫秒，这样，虽然在某一个瞬间，一个cpu只能执行一个任务，但在1秒内，cpu却可以运行多个进程，这就给人产生了并行的错觉，就是伪并发，以此来区分多处理器操作系统的真正硬件并行（多个cpu共享同一物理空间）
```

![img](http://9017499461.linshutu.top/%E5%B9%B6%E8%A1%8C%E4%B8%8E%E5%B9%B6%E5%8F%91.png)

### 操作系统的发展史

```
最早出现的计算机：算盘

电子类的计算机的发展史：
第一代计算机：手工操作--穿孔卡片1940~1955
	优点：个人独享整个计算机的资源
	缺点：
		1，硬件调试插线、耗时
		2，所有人都是串行执行
第二代计算机：磁带储存--批处理系统1955~1965
	优点：
		1，程序员不用亲自对硬件进行插线操控，效率高
		2，可以进行批量处理代码
	缺点：
		1，程序员不能独自使用计算机
		2，计算的过程仍然是串行
第三代计算机：集成电路，多道程序系统1965~1980
	大背景：
		1，集成电路：把所有的硬件变小，线路板
		2，将两套不同的生产线合并成一条生产线
	技术上的更新：多道技术
	什么是多道技术：多道技术中的多道指的是多个程序，多道技术的实现是为了解决多个程序竞争或者说共享同一个资源的有序调度的问题，解决的方式就是多路复用。多路复用分为空间上的复用和时间上的复用。
		1，空间上的复用
		将内存分区域，一个内存可以同时加载多个进程
	    2，时间上的复用
	    实现将cpu在多个进程之间来回切换，并且保留状态
	几乎所有的程序都有IO阻塞，遇到阻塞立马进行切换
	提高效率，最大限度的使用cpu
	实例：
	如果是一个IO密集型进程，来回切换提升效率
	如果是一个计算密集型，来回切换降低效率
	第三代计算机广泛采用了必须的保护硬件（程序之间的内存彼此隔离）之后，第三代计算机应用而生
	每个人占用计算机的时间有限
	多人共同使用一个计算机主机。
    第四代计算机：现代计算机1980~至今
```

### 进程的理论

```
串行：所有的任务一个一个的完成。
并发：一个cpu完成多个任务（在不同任务之间进行切换）。看起来像是同时完成。
并行：多个cpu执行多个任务，真正的同时完成。
阻塞：cpu遇到IO就是阻塞。
非阻塞：没有遇到IO，就叫非阻塞。


进程的创建：
	一个进程必须依赖于一个主进程才可以开启
	一个主进程可以开启多个子进程
	unix：调用fork创建子进程
	windows：操作系统调用CreatProcess处理进程的创建
unix和windows关于创建子进程的相同点和不同点：
	1.相同的是：进程创建后，父进程和子进程有各自不同的地址空间（多道技术要求物理层面实现进程之间内存的隔离），任何一个进程的在其地址空间中的修改都不会影响到另外一个进程。
	2.unix(linux/mac)：创建一个子进程会完完全全复制一个主进程所有的资源，初始资源不变。	windows：创建一个子进程，会copy主进程所有的资源，但会改变一些资源
	
进程的状态：
	运行
	阻塞
	就绪（阻塞切换到运行的那些时间）
```



